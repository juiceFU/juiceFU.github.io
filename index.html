<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>号码生成链接</title>
	

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/mhDoLbDldZc3qpsJHpLogda//BVZbgYuw6kof4u2FrCedxOtgRZDTHgHUhOCVim" crossorigin="anonymous"></script>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>

 <div class="alert alert-danger" role="alert" style="text-align: left;padding-left: 30px;">
 <b> 1、一定要先登录！<br/>
 	2、提前进预约界面中，到8点直接点【确认预约】按钮！<br/>
  3、不要在八点前点【确认预约】按钮，会预约成功，容易被发现</b>
</div>

<div id="app">
<div class="alert alert-success	" role="alert" style="text-align: center;">
<b>今日预约时间为：{{ days }}【{{ weeks }}】</b>
</div>
		<div class="crayon-clock alert alert-success">
        <div style="text-align: center;" class="crayon-clock-time"><b>现在时间：{{ time }}</b></div>
    </div>

	<table class="table">
	  <thead>
	    <tr>
	      <th scope="col">cid编号</th>
	      <th scope="col">微信号</th>
	      <th scope="col">姓名</th>
	      <th scope="col">跳转链接1</th>
	      <th scope="col">跳转链接2</th>
	    </tr>
	  </thead>
	  <tbody>
		<tr v-for="item in items">
	      <th scope="row">{{ item.cid }}</th>
	      <td>{{ item.wx }}</td>
	      <td>{{ item.name }}</td>
<!-- 	      <td><a :href="'http://yixinwenhua.situjia.top/wap/yvyue/yvyueok/cid/'+ item.cid +'/ban_id/'+banid1+'/yy_jz_time/'+ days+'.html'">8:30-9:30</a></td>
	      <td><a :href="'http://yixinwenhua.situjia.top/wap/yvyue/yvyueok/cid/'+ item.cid +'/ban_id/'+banid2+'/yy_jz_time/'+ days+'.html'">9:30-10:30</a></td> -->
		<td><a :href="'http://yixinwenhua.situjia.top/h5/pages/yuyueGegister3/yuyueGegister3?id='+ item.cid +'&pbId='+banid1+'&time='+ days+''">8:30-9:30</a></td>
		<td><a :href="'http://yixinwenhua.situjia.top/h5/pages/yuyueGegister3/yuyueGegister3?id='+ item.cid +'&pbId='+banid2+'&time='+ days+''">9:30-10:30</a></td>
<!-- 			//http://yixinwenhua.situjia.top/h5/pages/yuyueGegister3/yuyueGegister3?id=8683&pbId=295&time=2024-03-30 -->
	    </tr>
	  </tbody>
	</table>



</div>

<script type="text/javascript">
	
	//import { createApp } from 'vue'
// const app = createApp({
//   data() {
//     return {
//       count: 0,
//       items : "value", ref([{ message: 'Foo' }, { message: 'Bar' }])
//     }
//   }
// }).mount('#app')
// const items = ref([{ message: 'Foo' }, { message: 'Bar' }])
function buling(num){

	if(num.toString().length < 2){
		return '0'+num
	}else{
		return num
	}
}
function timstemp(day){
	var today = new Date();
	var targetday_milliseconds=today.getTime() + 1000*60*60*24*day;
	today.setTime(targetday_milliseconds); 
	return today;
}
function getDay(day){
	var today = timstemp(day)
	//注意，这行是关键代码
	var tYear = today.getFullYear();
	var tMonth = today.getMonth();
	var tDate = today.getDate();
	tMonth = this.doHandleMonth(tMonth + 1);
	tDate =  this.doHandleMonth(tDate);
	return tYear+"-"+buling(tMonth)+"-"+buling(tDate);
}
function banid1(day) {
	 	let days = ["296", "290", "291", "292", "293", "294", "295"];

        var today = timstemp(day);

        let weekday = today.getDay();

        weekDay = days[weekday];
	return weekDay;
}
function banid2(day) {
	 	let days = ["317", "299", "302", "305", "308", "311", "314"];

        var today = timstemp(day);

        let weekday = today.getDay();

        weekDay = days[weekday];
	return weekDay;
}
function weeks(day) {
	 	let days = ["周日", "周一", "周二", "周三", "周四", "周五", "周六"];

        var today = timstemp(day);

        let weekday = today.getDay();

        weekDay = days[weekday];
	return weekDay;
}
function doHandleMonth(month){
	var m = month;
	if(month.toString().length == 1){
		m =month;
	}
	return m;
}

const { createApp, ref } = Vue


  createApp({

    setup() {
      return {
        time: "",
        date: "1",
        week: "1",
        timerHelper: false,
        days: getDay(6),
        weeks:weeks(6),
        banid1:banid1(6),
        banid2:banid2(6),
        items:[{ wx:'果汁',name:'付舒雅',cid: '8683' }
        	, { wx:'白海清',name:'白海清',cid: '7932' }
        	,{ wx:'卢波',name:'卢波',cid: '14237' }
        	,{ wx:'mrwang',name:'白有生',cid: '7199' }
        	,{ wx:'幸福的旋律',name:'白有枝',cid: '8249' }
        	,{ wx:'郭凤凤',name:'郭计凤',cid: '7322' }
        	,{ wx:'卢慧',name:'卢华龙',cid: '9266' }
        	,{ wx:'Tsubasa',name:'王煜博',cid: '11806' }],
    
      }
    },
    mounted() {
    	this.timerHelper = setInterval(this.updateTime, 1000);
    },
    beforeDestroy() {
        if (this.timerHelper) {
            clearInterval(this.timerHelper);
            this.timerHelper = false;
        }
    },
    methods: {
        zeroPadding(num, digit) {
            let zero = "";
            for (let i = 0; i < digit; i++) {
                zero += "0";
            }
            return (zero + num).slice(-digit);
        },
        updateTime() {
        	
            const week = [
                "星期日",
                "星期一",
                "星期二",
                "星期三",
                "星期四",
                "星期五",
                "星期六",
            ];
            const cd = new Date();
            this.time =
                this.zeroPadding(cd.getHours(), 2) +
                ":" +
                this.zeroPadding(cd.getMinutes(), 2) +
                ":" +
                this.zeroPadding(cd.getSeconds(), 2);
            this.date =
                this.zeroPadding(cd.getFullYear(), 4) +
                "-" +
                this.zeroPadding(cd.getMonth() + 1, 2) +
                "-" +
                this.zeroPadding(cd.getDate(), 2);
						this.date = ref(this.date);
            this.week = week[cd.getDay()];
            console.log(this.date );

this.$forceUpdate();
        },
    }
  }).mount('#app')

//操作数据后更新视图


</script>
</body>
</html>
